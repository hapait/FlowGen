{"ast":null,"code":"import _objectSpread from\"C:/Users/Shaft/Desktop/flow/flowgen2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Shaft/Desktop/flow/flowgen2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _this=this;import React,{useState,Fragment}from'react';import{storage}from'../firebase';import ReactFlow,{addEdge,Background,Controls,MiniMap,getBezierPath,getMarkerEnd}from'react-flow-renderer';import Sidebar from'./Sidebar';import{slide as Menu}from'react-burger-menu';var initialElements=[{id:'1',type:'input',data:{label:'Start Node'},position:{x:0,y:0}}];var onLoad=function onLoad(reactFlowInstance){reactFlowInstance.fitView();};var Card=function Card(){var _useState=useState(initialElements),_useState2=_slicedToArray(_useState,2),elements=_useState2[0],setElements=_useState2[1];//const [elements, setElements] = useState([]);\nvar _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),lastId=_useState4[0],setLastId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"blank\"),_useState8=_slicedToArray(_useState7,2),text=_useState8[0],setText=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),removingId=_useState10[0],setRemovingId=_useState10[1];var _useState11=useState(\"new\"),_useState12=_slicedToArray(_useState11,2),nodeName=_useState12[0],setNodeName=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),images=_useState14[0],setImage=_useState14[1];var allInputs={imgUrl:''};var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),imageAsFile=_useState16[0],setImageAsFile=_useState16[1];var _useState17=useState(allInputs),_useState18=_slicedToArray(_useState17,2),imageAsUrl=_useState18[0],setImageAsUrl=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),progress=_useState20[0],setProgress=_useState20[1];var handleImageAsFile=function handleImageAsFile(e){var image=e.target.files[0];setImageAsFile(function(imageFile){return image;});};var handleFireBaseUpload=function handleFireBaseUpload(e){e.preventDefault();console.log('start of upload');// async magic goes here...\nif(imageAsFile===''){console.error(\"not an image, the image file is a \".concat(typeof imageAsFile));}var uploadTask=storage.ref(\"/images/\".concat(imageAsFile.name)).put(imageAsFile);//initiates the firebase side uploading \nuploadTask.on('state_changed',function(snapShot){//takes a snap shot of the process as it is happening\nconsole.log(snapShot);var prog=Math.round(snapShot.bytesTransferred/snapShot.totalBytes*100);setProgress(prog);},function(err){//catches the errors\nconsole.log(err);},function(){// gets the functions from storage refences the image storage in firebase by the children\n// gets the download url then sets the image from firebase as the value for the imgUrl key:\nstorage.ref('images').child(imageAsFile.name).getDownloadURL().then(function(fireBaseUrl){setImageAsUrl(function(prevObject){return _objectSpread(_objectSpread({},prevObject),{},{imgUrl:fireBaseUrl});});});});};var addNode=function addNode(){setElements(function(e){return e.concat({//id: (e.length + 1).toString(),\nid:lastId+1,data:{label:\"\".concat(name)},position:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight}});});};var addNode2=function addNode2(){var lId=parseInt(\"\".concat(lastId));var node=getImageNode(lId+1);setText(lId);setLastId(lId+1);setElements(function(e){return e.concat({//id: (e.length + 1).toString(),\nid:lId+1,//data: { label: <div><h1>Hello</h1></div> },\ndata:{label:node},//position: { x: Math.random() * window.innerWidth, y: Math.random() * window.innerHeight }\nposition:{x:e[0].position.x+50,y:e[0].position.y+50}});});};var onRemove=function onRemove(nid){//alert(nid.toString());\n//setText(\"removing\" + nid.toString());\nvar newarr=elements.filter(function(element){return element.id!==nid;});setElements(newarr);};var getImageNode=function getImageNode(nid){var x=nid.toString();return/*#__PURE__*/_jsxs(\"div\",{style:{flexDirection:'column',justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(\"a\",{children:nodeName}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"img\",{src:imageAsUrl.imgUrl,style:{width:80,height:80},alt:\"image tag\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{style:{right:10,top:10},onClick:function onClick(e){return onRemove(x);},children:\"Delete\"})]});};var onConnect=function onConnect(params){//setText(params.source.toString() + params.target.toString());\nvar i='e'+params.source.toString()+'-'+params.target.toString();var s=params.source.toString();var t=params.target.toString();setElements(function(e){return e.concat({id:i,source:s,target:t,animated:true});});};var selectImage=function selectImage(params){//setText(params.source.toString() + params.target.toString());\nvar i='e'+params.source.toString()+'-'+params.target.toString();var s=params.source.toString();var t=params.target.toString();setElements(function(e){return e.concat({id:i,source:s,target:t,animated:true});});};var handleClick=function handleClick(e){_this.refs.fileUploader.click();};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(Menu,{children:[/*#__PURE__*/_jsx(\"a\",{className:\"menu-item\",children:\"Create Node\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setNodeName(e.target.value);},name:\"Node Name\",style:{color:'#000'}}),progress==0||progress==100?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsx(\"progress\",{value:progress,max:\"100\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFireBaseUpload,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageAsFile}),/*#__PURE__*/_jsx(\"button\",{children:\"upload to firebase\"})]}),/*#__PURE__*/_jsx(\"button\",{style:{color:'#000'},type:\"button\",onClick:addNode2,children:\"Add Node\"})]}),/*#__PURE__*/_jsxs(ReactFlow,{elements:elements,onLoad:onLoad,style:{width:'100%',height:'90vh'},onConnect:onConnect,connectionLineStyle:{stroke:\"#ddd\",strokeWidth:2},connectionLineType:\"bezier\",snapToGrid:true,snapGrid:[16,16],children:[/*#__PURE__*/_jsx(Background,{color:\"#888\",gap:16}),/*#__PURE__*/_jsx(MiniMap,{}),/*#__PURE__*/_jsx(Controls,{})]})]});};export default Card;","map":{"version":3,"sources":["C:/Users/Shaft/Desktop/flow/flowgen2/src/Components/Basic2.js"],"names":["React","useState","Fragment","storage","ReactFlow","addEdge","Background","Controls","MiniMap","getBezierPath","getMarkerEnd","Sidebar","slide","Menu","initialElements","id","type","data","label","position","x","y","onLoad","reactFlowInstance","fitView","Card","elements","setElements","lastId","setLastId","name","setName","text","setText","removingId","setRemovingId","nodeName","setNodeName","images","setImage","allInputs","imgUrl","imageAsFile","setImageAsFile","imageAsUrl","setImageAsUrl","progress","setProgress","handleImageAsFile","e","image","target","files","imageFile","handleFireBaseUpload","preventDefault","console","log","error","uploadTask","ref","put","on","snapShot","prog","Math","round","bytesTransferred","totalBytes","err","child","getDownloadURL","then","fireBaseUrl","prevObject","addNode","concat","random","window","innerWidth","innerHeight","addNode2","lId","parseInt","node","getImageNode","onRemove","nid","newarr","filter","element","toString","flexDirection","justifyContent","width","height","right","top","onConnect","params","i","source","s","t","animated","selectImage","handleClick","refs","fileUploader","click","value","color","stroke","strokeWidth"],"mappings":"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","sourcesContent":["import React, { useState, Fragment } from 'react';\r\nimport { storage } from '../firebase';\r\nimport ReactFlow, { addEdge, Background, Controls, MiniMap, getBezierPath, getMarkerEnd } from 'react-flow-renderer';\r\nimport Sidebar from './Sidebar';\r\nimport { slide as Menu } from 'react-burger-menu';\r\n\r\nconst initialElements = [\r\n    { id: '1', type: 'input', data: { label: 'Start Node' }, position: { x: 0, y: 0 } }\r\n]\r\nconst onLoad = (reactFlowInstance) => {\r\n    reactFlowInstance.fitView();\r\n}\r\n\r\nconst Card = () => {\r\n\r\n    const [elements, setElements] = useState(initialElements);\r\n    //const [elements, setElements] = useState([]);\r\n    const [lastId, setLastId] = useState(1);\r\n    const [name, setName] = useState(\"\")\r\n    const [text, setText] = useState(\"blank\");\r\n    const [removingId, setRemovingId] = useState(0);\r\n    const [nodeName, setNodeName] = useState(\"new\");\r\n    const [images, setImage] = useState([]);\r\n\r\n    const allInputs = { imgUrl: '' }\r\n    const [imageAsFile, setImageAsFile] = useState('')\r\n    const [imageAsUrl, setImageAsUrl] = useState(allInputs);\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    const handleImageAsFile = (e) => {\r\n        const image = e.target.files[0]\r\n        setImageAsFile(imageFile => (image))\r\n    }\r\n    const handleFireBaseUpload = e => {\r\n        e.preventDefault()\r\n        console.log('start of upload')\r\n        // async magic goes here...\r\n        if (imageAsFile === '') {\r\n            console.error(`not an image, the image file is a ${typeof (imageAsFile)}`)\r\n        }\r\n        const uploadTask = storage.ref(`/images/${imageAsFile.name}`).put(imageAsFile)\r\n        //initiates the firebase side uploading \r\n        uploadTask.on('state_changed',\r\n            (snapShot) => {\r\n                //takes a snap shot of the process as it is happening\r\n                console.log(snapShot)\r\n                const prog = Math.round(snapShot.bytesTransferred / snapShot.totalBytes * 100);\r\n                setProgress(prog);\r\n            }, (err) => {\r\n                //catches the errors\r\n                console.log(err)\r\n            }, () => {\r\n                // gets the functions from storage refences the image storage in firebase by the children\r\n                // gets the download url then sets the image from firebase as the value for the imgUrl key:\r\n                storage.ref('images').child(imageAsFile.name).getDownloadURL()\r\n                    .then(fireBaseUrl => {\r\n                        setImageAsUrl(prevObject => ({ ...prevObject, imgUrl: fireBaseUrl }))\r\n                    })\r\n            })\r\n    }\r\n\r\n    const addNode = () => {\r\n        setElements(e => e.concat({\r\n            //id: (e.length + 1).toString(),\r\n            id: lastId + 1,\r\n            data: { label: `${name}` },\r\n            position: { x: Math.random() * window.innerWidth, y: Math.random() * window.innerHeight }\r\n        }));\r\n    };\r\n    const addNode2 = () => {\r\n        var lId = parseInt(`${lastId}`);\r\n        var node = getImageNode(lId + 1);\r\n        setText(lId);\r\n        setLastId(lId + 1);\r\n        setElements(e => e.concat({\r\n            //id: (e.length + 1).toString(),\r\n            id: lId + 1,\r\n            //data: { label: <div><h1>Hello</h1></div> },\r\n            data: { label: node },\r\n            //position: { x: Math.random() * window.innerWidth, y: Math.random() * window.innerHeight }\r\n            position: { x: e[0].position.x + 50, y: e[0].position.y + 50 }\r\n        }));\r\n    };\r\n    const onRemove = (nid) => {\r\n        //alert(nid.toString());\r\n        //setText(\"removing\" + nid.toString());\r\n        var newarr = elements.filter(element => element.id !== nid);\r\n        setElements(newarr);\r\n    };\r\n    const getImageNode = (nid) => {\r\n        var x = nid.toString();\r\n        return <div\r\n            style={{\r\n                flexDirection: 'column',\r\n                justifyContent: \"center\",\r\n            }}>\r\n            <a>{nodeName}</a><hr />\r\n            <img src={imageAsUrl.imgUrl} style={{ width: 80, height: 80 }} alt=\"image tag\" />\r\n            {\r\n                //images[0].name\r\n                //images.map((item,i) => <li key={i}>Test</li>)\r\n            }\r\n            <hr />\r\n            <button style={{ right: 10, top: 10 }} onClick={e => onRemove(x)}>Delete</button>\r\n        </div>\r\n    };\r\n\r\n    const onConnect = (params) => {\r\n        //setText(params.source.toString() + params.target.toString());\r\n        var i = 'e' + params.source.toString() + '-' + params.target.toString();\r\n        var s = params.source.toString();\r\n        var t = params.target.toString();\r\n        setElements(e => e.concat({\r\n            id: i,\r\n            source: s,\r\n            target: t,\r\n            animated: true\r\n        }));\r\n    }\r\n    const selectImage = (params) => {\r\n        //setText(params.source.toString() + params.target.toString());\r\n        var i = 'e' + params.source.toString() + '-' + params.target.toString();\r\n        var s = params.source.toString();\r\n        var t = params.target.toString();\r\n        setElements(e => e.concat({\r\n            id: i,\r\n            source: s,\r\n            target: t,\r\n            animated: true\r\n        }));\r\n    }\r\n    const handleClick = (e) => {\r\n        this.refs.fileUploader.click();\r\n    }\r\n    return (\r\n        <Fragment>\r\n            <Menu>\r\n                <a className=\"menu-item\">Create Node</a>\r\n                <input type=\"text\"\r\n                    onChange={e => setNodeName(e.target.value)}\r\n                    name=\"Node Name\" style={{ color: '#000' }} />\r\n                {progress == 0 || progress == 100 ?\r\n                    <div></div>\r\n                    :\r\n                    <progress value={progress} max=\"100\"></progress>}\r\n                <form onSubmit={handleFireBaseUpload}>\r\n                    <input\r\n                        type=\"file\"\r\n                        onChange={handleImageAsFile}\r\n                    />\r\n                    <button>upload to firebase</button>\r\n                </form>\r\n\r\n                <button style={{ color: '#000' }} type=\"button\" onClick={addNode2}>Add Node</button>\r\n            </Menu>\r\n            <ReactFlow\r\n                elements={elements}\r\n                onLoad={onLoad}\r\n                style={{ width: '100%', height: '90vh' }}\r\n                onConnect={onConnect}\r\n                connectionLineStyle={{ stroke: \"#ddd\", strokeWidth: 2 }}\r\n                connectionLineType=\"bezier\"\r\n                snapToGrid={true}\r\n                snapGrid={[16, 16]}\r\n            >\r\n                <Background color=\"#888\" gap={16} />\r\n                <MiniMap />\r\n                <Controls />\r\n            </ReactFlow>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default Card;"]},"metadata":{},"sourceType":"module"}